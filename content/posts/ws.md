---
title: "WebSocket: —Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞ –∫—É–ª–∏—Å–∞–º–∏"
tags:
  - ws
  - protocol
  - web
description: >
  –°–µ–≥–æ–¥–Ω—è –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç WS, –Ω–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π –∫–ª–∏–µ–Ω—Ç –Ω–∞ JS, –æ–±—Å—É–¥–∏–º –∫–∞–∫ –¥–µ–±–∞–∂–∏—Ç—å –¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª
  –Ω—É –∏ –ø—Ä–æ—Å—Ç–æ –æ–±—Å—É–¥–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤.
date: 2023-05-14
origin:
  type: vc
  url: https://vc.ru/dev/417980-websocket-smotrim-kak-rabotaet-za-kulisami
---

# –ü–µ—Ä–≤–∞—è —Å—Ç—É–ø–µ–Ω—å —Ä–∞–∑–≤–∏—Ç–∏—è: HTTP
–î–ª—è –Ω–∞—á–∞–ª–∞ —Å—Ç–æ–∏—Ç –Ω–∞—á–∞—Ç—å —Å —Ç–æ–≥–æ —á—Ç–æ —Ç–∞–∫–æ–µ HTTP?

**HTTP** - –ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≥–∏–ø–µ—Ä—Ç–µ—Å–∫—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Hyper Text Transfer Protocol), –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ.
HTTP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, —Ç–∞–º –≤—Å—é —Ä–∞–±–æ—Ç—É –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –æ–¥–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã:

![–ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–∞](/posts/ws/ws1.webp)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ HTTP
- HTTP –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ—Ç–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å.
- HTTP –æ–±—è–∑—É–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –∑–∞—Ä–∞–Ω–µ–µ –æ–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç —Å–¥–µ–ª–∞—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ (HTTP Headers) - GET, POST, PUT, DELETE
- –ú—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —á—Ç–æ —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–∞–∫ –æ–±—Ä–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∞–π—Ç–æ–≤, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç HTTP, –¥–∞–≤–∞–π—Ç–µ –≤–æ–∑—å–º–µ–º –∑–∞–±–∞–≤–Ω—ã–π —Å–∞–π—Ç
—Å REST API –ø–æ –º—É–ª—å—Ç–∏–≤—Å–µ–ª–µ–Ω–Ω–æ–π –†–∏–∫ –∏ –ú–æ—Ä—Ç–∏ ‚Äî https://rickandmortyapi.com/documentation.

–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å –ø–æ–º–æ—â—å—é Postman –∏–ª–∏ –æ–±—ã—á–Ω–æ–≥–æ cURL, —è –±—É–¥—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π.
–î–∞–≤–∞–π—Ç–µ –≤–æ–∑—å–º–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ (–†–∏–∫–µ) –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ –Ω–∞–º –ø—Ä–∏—à–ª—ë—Ç —Å–µ—Ä–≤–µ—Ä, –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º
–¥–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É: https://rickandmortyapi.com/api/character/1

```bash
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å –ø–æ–º–æ—â—å—é cURL –∏ –ø–∞—Ä—Å–∏–º –ø—Ä–∏—à–µ–¥—à–∏–π –æ—Ç–≤–µ—Ç —Å –ø–æ–º–æ—â—å—é JQ
curl https://rickandmortyapi.com/api/character/1 | jq
```

–ü–æ—Å–ª–µ –¥–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã –º—ã –ø–æ–ª—É—á–∏–º —Å–ª–µ–¥—É—é—â–∏–π –æ—Ç–≤–µ—Ç. –ö–∞–∫ –º—ã –≤–∏–¥–∏–º –º—ã –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
—Å —Å–µ—Ä–≤–µ—Ä–∞ (GET), —Å–µ—Ä–≤–µ—Ä –æ—Ç–¥–∞–ª –Ω–∞–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º—ã —Ä–∞–∑—Ä—ã–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –º—ã –ø–æ–ª—É—á–∏–º –æ—Ç–≤–µ—Ç
–º—ã –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ–º –æ —Å–µ—Ä–≤–µ—Ä–µ üëÄ

![](/posts/ws/ws2.webp)

–ù–∞–º –ø—Ä–∏—à–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –∫–∞–∫ –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

# –í—Ç–æ—Ä–∞—è —Å—Ç—É–ø–µ–Ω—å: AJAX

**AJAX** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –ø–æ–º–æ—â—å—é JavaScript (Asynchonous JavaScript and XML).
AJAX –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç –≤—Å–µ —Ç–µ –∂–µ —Ü–µ–ª–∏, —á—Ç–æ –∏ HTTP, —Ç–æ–ª—å–∫–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ —É–∂–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –ï—Å–ª–∏ —Ä–∞–Ω–µ–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
–ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–≤–æ–π URL –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É, —Ç–æ —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AJAX –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
—Å –ø–æ–º–æ—â—å—é –ø—Ä–æ–º–∏—Å–æ–≤ –∏–ª–∏ –∫–æ–ª–ª–±—ç–∫–æ–≤.

![](/posts/ws/ws3.webp)

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ AJAX
- –í—Å–µ –µ—â—ë –æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ—Ç–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å.
- –í—Å–µ –µ—â—ë –∑–∞—Ä–∞–Ω–µ–µ –æ–≥–æ–≤–∞—Ä–∏–≤–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç —Å–¥–µ–ª–∞—Ç—å –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ (HTTP Headers) - GET, POST, PUT, DELETE
- –ú—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ —á—Ç–æ —Ö–æ—Ç–∏–º —Å–¥–µ–ª–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–∞–∫ –æ–±—Ä–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- –¢–µ–ø–µ—Ä—å –º—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è JavaScript

–°–∞–º—ã–º –ø—Ä–æ—Å—Ç—ã–º –ø—Ä–∏–º–µ—Ä–æ–º AJAX —è–≤–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

```javascript [ajax-node.js]
// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ NodeJS ^17.5
// –ë—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö ~–µ—Å–ª–∏ –≤—ã –Ω–µ –Ω–∞ Internet Explorer 8~

/**
 * –ú–µ—Ç–æ–¥ –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –≤—ã–≤–æ–¥ AJAX-–∑–∞–ø—Ä–æ—Å–∞
 * @param {string} url - —Å—Å—ã–ª–∫–∞, –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ–º –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å
 * @returns {void}
 */
function showAJAXResponse(url) {

	// –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
	fetch(url)
		.then(res => res.json())          // –§–æ—Ä–º–∏—Ä—É–µ–º JSON
		.then(console.log);               // –í—ã–≤–æ–¥–∏–º
}

// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º AJAX –∑–∞–ø—Ä–æ—Å üèÄ
showAJAXResponse('https://rickandmortyapi.com/api/character/1');
```

–í–æ—Ç —á—Ç–æ –º—ã –ø–æ–ª—É—á–∏–º –≤ –∏—Ç–æ–≥–µ:

![](/posts/ws/ws4.webp)

–ö–∞–∫ –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å, –º—ã –≤—Å–µ –µ—â—ë –Ω–µ –¥–µ—Ä–∂–∏–º —Å–≤—è–∑—å —Å —Å–µ—Ä–≤–µ—Ä–æ–º.
–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∑–∞–ø—Ä–æ—Å, –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç –∏ –≤—Å–µ. –ß—Ç–æ –¥–∞–ª—å—à–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º –Ω–∞–º –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ.

# –¢—Ä–µ—Ç—å—è —Å—Ç—É–ø–µ–Ω—å: WS –∏–ª–∏ WebSocket

**WebSocket** - –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –æ–±—â–µ–Ω–∏—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ –æ–±—â–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ TCP.

–ú—ã –ø–æ–¥–∫–ª—é—á–∞–µ–º WS –æ–¥–∏–Ω —Ä–∞–∑, –∞ –∑–∞—Ç–µ–º —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å –Ω–∞–º –æ—Ç–≤–µ—Ç—ã —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –ø–æ—Å—á–∏—Ç–∞–µ—Ç –Ω—É–∂–Ω—ã–º:

![](/posts/ws/ws5.webp)

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü–µ—Ä–≤–æ–µ —á—Ç–æ –º—ã –¥–µ–ª–∞–µ–º ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–±—ã—á–Ω—ã–π TCP-–∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ú—ã –≥–æ–≤–æ—Ä–∏–º, —á—Ç–æ —Ö–æ—Ç–∏–º –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –∂–¥—ë–º –æ—Ç –Ω–µ–≥–æ –æ—Ç–≤–µ—Ç–∞.
–¢–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äú—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ‚Äù (Handshake), –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä –∫–æ–≥–¥–∞ –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å –∫
—Ä–æ—É—Ç–µ—Ä—É –≤–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Ä–æ—É—Ç–µ—Ä—É —Å –∫–ª—é—á–∞–º–∏, —Ä–æ—É—Ç–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –û–ö –∏ –≤—ã —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å.

–ó–∞—Ç–µ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏: –¥–æ–ø—É—Å—Ç–∏–º –æ–¥–∏–Ω –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–∏–ª HTTP-–∑–∞–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä—É –∏ –Ω—É–∂–Ω–æ –æ—Ç–¥–∞—Ç—å –æ—Ç–≤–µ—Ç
–Ω–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É, –∞ —Ü–µ–ª–æ–π —Å–µ—Ç–∏! –°–µ—Ä–≤–µ—Ä –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –æ—Ç–¥–∞—Å—Ç –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é –∑–∞–ø—Ä–æ—Å–∞, –∞ –≤—Å–µ–º –¥—Ä—É–≥–∏–º –ø—Ä–∏—à–ª—ë—Ç
–ø–∞–∫–µ—Ç—ã –ø–æ WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é —Å –ø–æ–ª–µ–∑–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

–†–∞–∑–±–µ—Ä–µ–º –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ. –í—ã ‚Äî –∫–ª–∏–µ–Ω—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –∑–∞–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä—É –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ. –ó–∞–ø—Ä–æ—Å –∏ –æ—Ç–≤–µ—Ç –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å
–ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

```markdown
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä—É –ø–æ —Å—Å—ã–ª–∫–µ example.com/connect-to-ws
# –í–æ—Ç —á—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ –º—ã –ø—Ä–∏—à–ª—ë–º:
GET /connect-to-ws HTTP/1.1
Host: example.com:8000
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==
Sec-WebSocket-Version: 13

# –ê –≤–æ—Ç —á—Ç–æ –Ω–∞–º –Ω–∞ —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å –æ—Ç–≤–µ—Ç–∏—Ç —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–∏:
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: s3pPLMBiTxaQ9kYGzzhZRbK+xOo=
```

–ö–∞–∫ –º—ã –≤–∏–¥–∏–º —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª –Ω–µ –∫–æ–¥–æ–º 200 (—É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞), –∞ 101 ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.
–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É, —á—Ç–æ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ HTTP –∑–∞–ø—Ä–æ—Å, –∞ —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ HTTP-–æ—Ç–≤–µ—Ç, –∞ –µ—â—ë –∏ –¥—Ä—É–≥–∏–µ –æ—Ç–≤–µ—Ç—ã –ø–æ WS,
—Å–µ—Ä–≤–µ—Ä –∫–∞–∫ –±—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç, —á—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑üîô

### –ê –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä —É–∑–Ω–∞–µ—Ç, —á—Ç–æ –º—ã –¥–æ —Å–∏—Ö –ø–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω—ã?üòÖ

–û—Ç–≤–µ—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–µ–≥–∫–∏–π ‚Äî —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç –∏–≥—Ä–∞—é—Ç –≤ –ø–∏–Ω–≥-–ø–æ–Ω–≥üò≥üèìüò≥

–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ WS —Å –ø—Ä–æ—Å—å–±–æ–π –æ –¥–µ–π—Å—Ç–≤–∏–∏ - –ø–æ—Å–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
–ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º-–∞—É—Ç–∞ ‚Äî –æ–Ω –ø–æ–¥–∫–ª—é—á–µ–Ω, –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—èüëã

### –ü–æ—á–µ–º—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º (–¥—É–ø–ª–µ–∫—Å–Ω—ã–º), –∞ –æ—Ç–≤–µ—Ç—ã –º—ã –ø–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞?

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –º—ã –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç—ã –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞, –∞ –µ—â—ë –∏ –º–æ–∂–µ–º –≤ –¥–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–º –ø–æ—Ä—è–¥–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ WS –∑–∞–ø—Ä–æ—Å—ã!

–ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å, –¥–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ª–µ–≥–∫–∏–π –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞ JavaScript:

```javascript [send-ws.js]
// –°–æ–∑–¥–∞–µ–º WS-–æ–±—ä–µ–∫—Ç, —Å –ø–æ–º–æ—â—å—é—é –Ω–µ–≥–æ –±—É–¥–µ–º —Ä—É–ª–∏—Ç—å –ø–æ—Ç–æ–∫–∞–º–∏
// (–æ—Ç–ø—Ä–∞–≤–∫–∞, –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤)
const myWS = new WebSocket(url, protocols);

// –î–æ —Ç–æ–≥–æ –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä –∏ –∫–ª–∏–µ–Ω—Ç —Å–æ–≤–µ—Ä—à–∞—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ
// —Å—Ç–∞—Ç—É—Å —É WS-–∫–ª–∏–µ–Ω—Ç–∞ –±—É–¥–µ—Ç CONNECTING
console.log(myWS.readyState); // CONNECTING

// –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (Handshake) –ø—Ä–æ–π–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ
// readyState –±—É–¥–µ—Ç OPEN
console.log(myWS.readyState); // OPEN
```

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –º—ã –æ—Ç–∫—Ä—ã–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ WS –º—ã —Å—Ä–∞–∑—É –∂–µ –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—É:

```javascript [sendWs.js]
/*
–ù–µ –∑–∞–±—ã–≤–∞–µ–º, —á—Ç–æ –º—ã –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—É
—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ
–ü–æ–º–µ—Å—Ç–∏–º –≤—Å–µ –æ–±—â–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –≤–Ω—É—Ç—Ä—å –∏–≤–µ–Ω—Ç–∞ onopen,
–∏–º–µ–Ω–Ω–æ –æ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–æ
*/
myWS.onopen = function (event) {

	// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ WS
	myWS.send('–ü—Ä–∏–≤–µ—Ç, —Å–µ—Ä–≤–µ—Ä!');
}
```

–°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∏—Ç –¥–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–º–æ–∂–Ω–æ –∑–∞—Ö–æ—á–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å, –Ω–æ –º—ã –Ω–µ —Å–º–æ–∂–µ–º –ø—Ä–æ—á–∏—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç! –ü–æ—á–µ–º—É?
–î–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∞—Å –Ω–µ—Ç —Å–ª—É—à–∞—Ç–µ–ª—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞. –°–¥–µ–ª–∞–µ–º –∂–µ –µ–≥–æ:

```javascript [receiveWs.js]
// –í–µ—à–∞–µ–º —Å–ª—É—à–∞—Ç–µ–ª—å –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
myWS.onmessage = (event) => {

	// –î–µ–ª–∞–µ–º —Å –¥–∞–Ω–Ω—ã–º–∏ –≤—Å–µ —á—Ç–æ –∑–∞—Ö–æ—Ç–∏–º, —è –∏—Ö –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–µ–¥—É
	console.log(event.data);
}
```

### –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–î–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä—É, –∞ –æ–Ω –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏—é —Ç–∞–π–º–∞—É—Ç–∞
—Ç–æ–∂–µ –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è. –í JavaScript —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –æ–¥–Ω–∏–º –º–µ—Ç–æ–¥–æ–º:

```javascript [closeWs.js]
// –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
myWS.close();

// –ù—É –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏–µ onclose, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏—è
myWS.onclose = (event) => {
	// ...
};
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ WS
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑

## –î–µ–±–∞–≥–≥–∏–Ω–≥ WS
–û—Ç–ª–∞–∂–∏–≤–∞—Ç—å WS-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–æ–≤—Å–µ–º –Ω–µ—Å–ª–æ–∂–Ω–æ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä –æ—Ç–ª–∞–¥–∫–∏ WS –Ω–∞ Google Chromeüåé,
–ø–µ—Ä–µ–π–¥–µ–º –Ω–∞ –¥–∞–Ω–Ω—ã–π —Å–∞–π—Ç: https://websocketstest.com/

–û—Ç–∫—Ä–æ–µ–º DevTools, –≤—ã–±–µ—Ä–µ–º –≤–∫–ª–∞–¥–∫—É Networks –∏ –ø–µ—Ä–µ–π–¥–µ–º –≤ —Ç–∞–± WS:

![](/posts/ws/ws6.webp)

–ö–∞–∫ –º—ã –≤–∏–¥–∏–º –æ—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ 101 Switching Protocols, –æ–¥–Ω–∞–∫–æ –∫–∞–∫ –Ω–∞–º —É–≤–∏–¥–µ—Ç—å –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –ø–æ WS,
–≤–∫–ª–∞–¥–∫–∏ `Response` –∂–µ –Ω–µ—Çü§î

–í–∫–ª–∞–¥–∫–∏ `Response` –Ω–µ—Ç, –∑–∞—Ç–æ –ø–æ—è–≤–∏–ª–∞—Å—å –Ω–æ–≤–∞—è - Messages. –û—Ç–∫—Ä—ã–≤–∞–µ–º –µ—ë –∏ –≤–∏–¥–∏–º —Ç–∞–º –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:

![](/posts/ws/ws7.webp)

–ö—Ä–∞—Å–Ω–æ–π —Å—Ç—Ä–µ–ª–∫–æ–π –≤–Ω–∏–∑ –ø–æ–∫–∞–∑–∞–Ω—ã –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏—à–ª–∏ –Ω–∞–º (–ø—É—Å—Ç—å –≤–∞—Å –Ω–µ –≤–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ
–∫—Ä–∞—Å–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞, —ç—Ç–æ –Ω–µ —É–ø–∞–≤—à–∏–µ, –∞ –ø—Ä–∏—à–µ–¥—à–∏–µ –ø–∞–∫–µ—Ç—ã), –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –∑–µ–ª—ë–Ω–æ–π —Å—Ç—Ä–µ–ª–∫–æ–π,
–∫–æ—Ç–æ—Ä–∞—è —Å—Ç—Ä–µ–º–∏—Ç—Å—è –≤–≤–µ—Ä—Ö‚¨Ü
